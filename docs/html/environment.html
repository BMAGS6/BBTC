<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BMAGS Ballistic Trajectory Calculator: Environmental Modeling System</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">BMAGS Ballistic Trajectory Calculator
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('environment.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Environmental Modeling System</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#model_components">Core Atmospheric Variables</a></li>
<li class="level1"><a href="#wind">Wind Modeling</a></li>
<li class="level1"><a href="#altitude">Altitude Effects</a></li>
<li class="level1"><a href="#extensions">Future Enhancements</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="overview"></a>
Overview</h1>
<p>BBTC's environmental modeling system dynamically computes atmospheric variables that influence projectile behavior during flight. These variables include air temperature, pressure, density, humidity, and the speed of sound, each of which contributes to realistic drag, lift, and sound barrier effects.</p>
<p>This system ensures that long-range simulations remain accurate across altitude bands, weather conditions, and geographic locations.</p>
<h1><a class="anchor" id="model_components"></a>
Core Atmospheric Variables</h1>
<p>The following variables are computed or adjusted during each simulation step:</p>
<ul>
<li><b>Temperature</b> ( \( T \) ) — Measured in kelvin (K), derived from user input or standard conditions.</li>
<li><b>Pressure</b> ( \( P \) ) — Calculated from altitude using the barometric formula: <p class="formulaDsp">
\[ P = P_0 \cdot \left(1 - \frac{L h}{T_0} \right)^{\frac{g M}{R L}} \]
</p>
 where:<ul>
<li>\( P_0 \): sea level pressure (101325 Pa)</li>
<li>\( L \): lapse rate (0.0065 K/m)</li>
<li>\( h \): altitude above sea level (m)</li>
<li>\( T_0 \): reference temperature (K)</li>
<li>\( g \): gravitational acceleration (9.80665 m/s²)</li>
<li>\( M \): molar mass of Earth's air (0.0289644 kg/mol)</li>
<li>\( R \): universal gas constant (8.31447 J/(mol·K))</li>
</ul>
</li>
<li><b>Humidity</b> (H) — Impacts the effective air density and speed of sound.</li>
<li><b>Air</b> <b>Density</b> \( \rho \) — Adjusted based on altitude, temperature, and humidity: <p class="formulaDsp">
\[ \rho = \frac{P}{R_d T} + \frac{e}{R_v T} \]
</p>
 where:<ul>
<li>\( e \): vapor pressure from humidity</li>
<li>\( R_d \): specific gas constant for dry air</li>
<li>\( R_v \): specific gas constant for water vapor</li>
</ul>
</li>
<li><b>Speed</b> <b>of</b> <b>Sound</b> ( \(a\)) — Influences Mach number and drag coefficient lookup: <p class="formulaDsp">
\[ a = \sqrt{\gamma R T} \]
</p>
 \( \gamma \) and \( R \) are adjusted for humidity using weighted mixing rules.</li>
</ul>
<h1><a class="anchor" id="wind"></a>
Wind Modeling</h1>
<p>Wind is currently modeled as a fixed 3D vector, representing a constant wind condition throughout the simulation. It is subtracted from the projectile's velocity to obtain a relative airspeed used in drag and lift calculations:</p>
<p class="formulaDsp">
\[ \mathbf{v}_{\mathrm{rel}} = \mathbf{v}_{\mathrm{bullet}} - \mathbf{v}_{\mathrm{wind}} \]
</p>
<p>The wind vector is defined in world coordinates (e.g., east/north/up), and its effect is consistent over time.</p>
<p>Future versions of BBTC may implement time-varying wind patterns, terrain-influenced wind behavior, or stochastic gust models.</p>
<h1><a class="anchor" id="altitude"></a>
Altitude Effects</h1>
<p>All environmental variables dynamically update based on the bullet's instantaneous altitude. As the bullet ascends or descends, pressure and temperature change according to the International Standard Atmosphere (ISA) model, and density is recalculated accordingly.</p>
<p>These changes allow BBTC to realistically model supersonic transition behavior and long-range arcing flight paths.</p>
<h1><a class="anchor" id="units"></a>
Units and Internal Format</h1>
<p>Internally, the environmental model uses strict SI units:</p><ul>
<li>Temperature: K (Kelvin)</li>
<li>Pressure: Pa (Pascals = 0.000145038 psi = 0.00750062 mmHg)</li>
<li>Humidity: % (0.0 to 1.0, where 1.0 = 100%)</li>
<li>Density: kg/m³ (kilograms per cubic meter = 0.062428 lb/ft³)</li>
<li>Speed of sound: m/s (meters per second = 3.28084 ft/s = 2.23694 mph)</li>
</ul>
<h1><a class="anchor" id="output"></a>
Output Logging</h1>
<p>The environment model contributes the following to each output step:</p><ul>
<li>Air density</li>
<li>Temperature</li>
<li>Pressure</li>
<li>Speed of sound</li>
<li>Relative velocity (for drag and Mach)</li>
</ul>
<p>These values are logged alongside core trajectory information to allow deep post-analysis and visualization.</p>
<h1><a class="anchor" id="extensions"></a>
Future Enhancements</h1>
<p>Planned improvements to the environmental system include:</p><ul>
<li>Input able to be entered in U.S. customary units and to be converted to SI on ingest. The simulation could optionally output a secondary CSV log in U.S. units for convenience.</li>
<li>Dynamic wind profiles</li>
<li>Weather layer ingestion (e.g., METAR or grib2 feeds)</li>
<li>Pressure wave modeling</li>
<li>Humidity-based fog effects or index of refraction simulation</li>
<li>Layered atmospheric models with inversion zones</li>
<li>Custom weather and location data uploaded by the user or downloaded by the user to the program through a weather API</li>
</ul>
<p>BBTC’s environmental engine ensures that projectile motion is grounded in physical reality and can adapt to a wide range of shooting scenarios. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
